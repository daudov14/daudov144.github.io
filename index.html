<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ò–≥—Ä–∞ —Å –∞—Ä–∞–±—Å–∫–∏–º–∏ —Å–ª–æ–≤–∞–º–∏</title>
<style>
body {
  margin: 0;
  font-family: sans-serif;
  background: #111;
  color: #fff;
}
section {
  display: none;
  padding: 1rem;
  height: 100vh;
  box-sizing: border-box;
}
section.visible {
  display: block;
  animation: fadeIn 0.4s ease;
}
@keyframes fadeIn {
  from {opacity:0; transform: translateY(20px);}
  to {opacity:1; transform: translateY(0);}
}
button {
  margin: 0.5rem;
  padding: 0.7rem 1.2rem;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  background: #222;
  color: #0ff;
  font-size: 1rem;
}
button:hover {
  background: #333;
}
.big {
  display: block;
  width: 90%;
  margin: 1rem auto;
  font-size: 1.3rem;
  background: #222;
  border: 2px solid #0ff;
}
.category {
  font-weight: bold;
  margin-top: 1rem;
  color: #0af;
}
.word {
  margin-left: 1rem;
}
#gameWord {
  text-align: center;
  font-size: 2rem;
  margin: 1rem 0;
}
.option {
  display: block;
  margin: 0.3rem auto;
  padding: 0.5rem;
  max-width: 300px;
  background: #333;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.3s ease;
}
.option:hover {
  background: #444;
}
.option.correct {
  background: #2a5 !important;
}
.option.wrong {
  background: #a22 !important;
}
#score, #bestScore, #timer {
  text-align: center;
  margin: 0.5rem;
  font-size: 1.2rem;
}
</style>
</head>
<body>

<section id="menu" class="visible">
  <h1 style="text-align:center;">üìñ –ê—Ä–∞–±—Å–∫–∏–µ —Å–ª–æ–≤–∞</h1>
  <button id="btnWords" class="big">–í—Å–µ —Å–ª–æ–≤–∞</button>
  <button id="btnGame" class="big">–ò–≥—Ä–∞</button>
</section>

<section id="words">
  <button id="backFromWords">‚¨Ö –ù–∞–∑–∞–¥</button>
  <h2>–í—Å–µ —Å–ª–æ–≤–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h2>
  <div id="wordList"></div>
</section>

<section id="game">
  <button id="backFromGame">‚¨Ö –ù–∞–∑–∞–¥</button>
  <h2>üéÆ –ò–≥—Ä–∞</h2>
  <div id="score">–û—á–∫–∏: 0</div>
  <div id="bestScore">üèÜ –†–µ–∫–æ—Ä–¥: 0</div>
  <div id="timer">‚è≥ 30</div>
  <div id="gameWord"></div>
  <div id="options"></div>
</section>

<audio id="soundCorrect" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_6e0d91d44b.mp3?filename=correct-2-46134.mp3"></audio>
<audio id="soundWrong" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_a20c802c9b.mp3?filename=error-2-27903.mp3"></audio>

<script>
// —Å–ª–æ–≤–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
const categories = {
  "–ï–¥–∞": [
    {ar: "ÿ™ŸÅÿßÿ≠ÿ©", ru: "–Ø–±–ª–æ–∫–æ"},
    {ar: "ŸÖÿßÿ°", ru: "–í–æ–¥–∞"},
    {ar: "ÿÆÿ®ÿ≤", ru: "–•–ª–µ–±"},
    {ar: "ŸÑÿ®ŸÜ", ru: "–ú–æ–ª–æ–∫–æ"}
  ],
  "–£—á—ë–±–∞": [
    {ar: "ŸÉÿ™ÿßÿ®", ru: "–ö–Ω–∏–≥–∞"},
    {ar: "ŸÖÿØÿ±ÿ≥ÿ©", ru: "–®–∫–æ–ª–∞"},
    {ar: "ŸÇŸÑŸÖ", ru: "–†—É—á–∫–∞"},
    {ar: "ÿØÿ±ÿ≥", ru: "–£—Ä–æ–∫"}
  ],
  "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç": [
    {ar: "ÿ≥Ÿäÿßÿ±ÿ©", ru: "–ú–∞—à–∏–Ω–∞"},
    {ar: "ÿ∑ÿßÿ¶ÿ±ÿ©", ru: "–°–∞–º–æ–ª—ë—Ç"},
    {ar: "ŸÇÿ∑ÿßÿ±", ru: "–ü–æ–µ–∑–¥"},
    {ar: "ÿØÿ±ÿßÿ¨ÿ©", ru: "–í–µ–ª–æ—Å–∏–ø–µ–¥"}
  ]
};

// —Å–æ–±—Ä–∞—Ç—å –≤—Å–µ —Å–ª–æ–≤–∞ –≤ –æ–¥–∏–Ω –º–∞—Å—Å–∏–≤
const words = Object.values(categories).flat();

// –Ω–∞–≤–∏–≥–∞—Ü–∏—è
const menu = document.getElementById("menu");
const wordsSec = document.getElementById("words");
const gameSec = document.getElementById("game");

document.getElementById("btnWords").onclick = () => show(wordsSec);
document.getElementById("btnGame").onclick = () => startGame();

document.getElementById("backFromWords").onclick = () => show(menu);
document.getElementById("backFromGame").onclick = () => {
  clearInterval(timer);
  show(menu);
};

function show(section) {
  document.querySelectorAll("section").forEach(s => s.classList.remove("visible"));
  section.classList.add("visible");
}

// –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å–ª–æ–≤–∞
const wordList = document.getElementById("wordList");
Object.keys(categories).forEach(cat => {
  const catDiv = document.createElement("div");
  catDiv.className = "category";
  catDiv.textContent = cat;
  wordList.appendChild(catDiv);
  categories[cat].forEach(w => {
    const wordDiv = document.createElement("div");
    wordDiv.className = "word";
    wordDiv.textContent = `${w.ar} ‚Äî ${w.ru}`;
    wordList.appendChild(wordDiv);
  });
});

// –∏–≥—Ä–∞
const gameWord = document.getElementById("gameWord");
const options = document.getElementById("options");
const scoreDiv = document.getElementById("score");
const bestScoreDiv = document.getElementById("bestScore");
const timerDiv = document.getElementById("timer");

const sndCorrect = document.getElementById("soundCorrect");
const sndWrong = document.getElementById("soundWrong");

let currentWord, correct, score, bestScore = +localStorage.getItem("bestScore") || 0;
bestScoreDiv.textContent = `üèÜ –†–µ–∫–æ—Ä–¥: ${bestScore}`;
let timeLeft = 30, timer;

function startGame() {
  show(gameSec);
  score = 0;
  timeLeft = 30;
  updateScore();
  timerDiv.textContent = `‚è≥ ${timeLeft}`;
  nextWord();
  timer = setInterval(() => {
    timeLeft--;
    timerDiv.textContent = `‚è≥ ${timeLeft}`;
    if (timeLeft <= 0) {
      clearInterval(timer);
      if (score > bestScore) {
        bestScore = score;
        localStorage.setItem("bestScore", bestScore);
      }
      bestScoreDiv.textContent = `üèÜ –†–µ–∫–æ—Ä–¥: ${bestScore}`;
      gameWord.textContent = "‚è≥ –í—Ä–µ–º—è –≤—ã—à–ª–æ!";
      options.innerHTML = "";
    }
  }, 1000);
}

function updateScore() {
  scoreDiv.textContent = `–û—á–∫–∏: ${score}`;
}

function nextWord() {
  options.innerHTML = "";
  currentWord = words[Math.floor(Math.random() * words.length)];
  const showArabic = Math.random() < 0.5;
  gameWord.textContent = showArabic ? currentWord.ar : currentWord.ru;
  correct = showArabic ? currentWord.ru : currentWord.ar;

  let opts = [correct];
  while (opts.length < 4) {
    const w = words[Math.floor(Math.random() * words.length)];
    const opt = showArabic ? w.ru : w.ar;
    if (!opts.includes(opt)) opts.push(opt);
  }

  opts = opts.sort(() => Math.random() - 0.5);
  opts.forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt;
    btn.className = "option";
    btn.onclick = () => {
      if (opt === correct) {
        btn.classList.add("correct");
        sndCorrect.currentTime = 0; sndCorrect.play();
        score++;
      } else {
        btn.classList.add("wrong");
        sndWrong.currentTime = 0; sndWrong.play();
      }
      updateScore();
      setTimeout(nextWord, 600);
    };
    options.appendChild(btn);
  });
}
</script>
</body>
</html>
