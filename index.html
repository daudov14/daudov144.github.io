<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</title>
<style>
body {
  margin: 0;
  padding: 1rem;
  font-family: sans-serif;
  background: #101010 url("IMG_0858.jpeg") no-repeat center center fixed;
  background-size: cover;
  color: #eee;
  direction: rtl;
}
h1 {
  text-align: center;
}
input, button, select {
  width: 100%;
  margin: 0.5rem 0;
  padding: 0.5rem;
  font-size: 1rem;
  border: none;
  border-radius: 5px;
}
button {
  background: #333;
  color: white;
}
button:hover {
  background: #555;
}
.word-list {
  max-height: 200px;
  overflow-y: auto;
  border: 1px solid #333;
  padding: 0.5rem;
  margin: 1rem 0;
}
.word-item {
  padding: 0.3rem;
}
.word-item:hover {
  background: #333;
  cursor: pointer;
}
.word-item.selected {
  background: #555;
}
#translation {
  margin-top: 1rem;
  text-align: center;
  font-size: 1.2rem;
}
.game {
  margin-top: 2rem;
  border-top: 1px solid #333;
  padding-top: 1rem;
}
.options button {
  margin: 0.2rem;
  width: 48%;
}
button:disabled {
  opacity: 0.5;
}
</style>
</head>
<body>

<h1>ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</h1>

<input type="text" id="search" placeholder="üîç –ü–æ–∏—Å–∫ —Å–ª–æ–≤–∞...">
<div style="display:flex;gap:0.5rem;">
<select id="categorySelect">
  <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
</select>
<button id="resetFilter" aria-label="–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
</div>

<div class="word-list" id="wordList"></div>
<div id="translation" aria-live="polite"></div>
<button id="playAudio" style="display:none;">üîä –ü—Ä–æ—Å–ª—É—à–∞—Ç—å</button>

<div class="game">
  <h2>üéÆ –ò–≥—Ä–∞: —É–≥–∞–¥–∞–π —Å–ª–æ–≤–æ</h2>
  <label for="level">–£—Ä–æ–≤–µ–Ω—å:</label>
  <select id="level">
    <option value="10">–õ—ë–≥–∫–∏–π (10 —Å–ª–æ–≤)</option>
    <option value="50">–°—Ä–µ–¥–Ω–∏–π (50 —Å–ª–æ–≤)</option>
    <option value="all">–°–ª–æ–∂–Ω—ã–π (–≤—Å–µ —Å–ª–æ–≤–∞)</option>
  </select>
  <div>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:
    <select id="gameCategory">
      <option value="">–í—Å–µ</option>
    </select>
  </div>
  <div id="score">–û—á–∫–∏: 0</div>
  <div id="timer">‚è≥ 15</div>
  <div id="question"></div>
  <div class="options" id="options"></div>
  <div id="result" aria-live="polite"></div>
  <button id="next">‚û°Ô∏è –°–ª–µ–¥—É—é—â–µ–µ</button>
</div>

<script>
// üìù –¥–∞–Ω–Ω—ã–µ —Å–ª–æ–≤
const words = [
  { arabic: "ŸÉÿ™ÿßÿ®", translation: "–∫–Ω–∏–≥–∞", category: "–£—á—ë–±–∞" },
  { arabic: "ŸÖÿØÿ±ÿ≥ÿ©", translation: "—à–∫–æ–ª–∞", category: "–£—á—ë–±–∞" },
  { arabic: "ÿ¨ÿßŸÖÿπÿ©", translation: "—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç", category: "–£—á—ë–±–∞" },
  { arabic: "ŸÖÿßÿ°", translation: "–≤–æ–¥–∞", category: "–ï–¥–∞" },
  { arabic: "ÿ™ŸÅÿßÿ≠ÿ©", translation: "—è–±–ª–æ–∫–æ", category: "–ï–¥–∞" },
  { arabic: "ÿ®Ÿäÿ™", translation: "–¥–æ–º", category: "–î–æ–º" },
  { arabic: "ŸÉÿ±ÿ≥Ÿä", translation: "—Å—Ç—É–ª", category: "–ú–µ–±–µ–ª—å" },
  { arabic: "ŸÇÿ∑ÿ©", translation: "–∫–æ—à–∫–∞", category: "–ñ–∏–≤–æ—Ç–Ω—ã–µ" },
  { arabic: "ÿ≥Ÿäÿßÿ±ÿ©", translation: "–º–∞—à–∏–Ω–∞", category: "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç" },
  { arabic: "ÿ¥ŸÖÿ≥", translation: "—Å–æ–ª–Ω—Ü–µ", category: "–ü—Ä–∏—Ä–æ–¥–∞" },
  { arabic: "ÿßŸÑÿ£ÿ≠ÿØ", translation: "–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ", category: "–í—Ä–µ–º—è" },
  { arabic: "ÿ£ÿ®Ÿäÿ∂", translation: "–±–µ–ª—ã–π", category: "–¶–≤–µ—Ç–∞" },
  { arabic: "Ÿàÿßÿ≠ÿØ", translation: "–æ–¥–∏–Ω", category: "–ß–∏—Å–ª–∞" },
  { arabic: "ÿ£ŸÜÿß", translation: "—è", category: "–û–±—â–µ–µ" },
  { arabic: "ÿ£ÿ®", translation: "–æ—Ç–µ—Ü", category: "–°–µ–º—å—è" }
];

// üîç –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä
const wordListEl = document.getElementById('wordList');
const translationEl = document.getElementById('translation');
const categorySelect = document.getElementById('categorySelect');
const resetFilter = document.getElementById('resetFilter');
const searchInput = document.getElementById('search');
const playAudioBtn = document.getElementById('playAudio');

let filteredWords = words;
let selectedWord = null;

// üé≤ –∏–≥—Ä–∞
const levelEl = document.getElementById('level');
const gameCategoryEl = document.getElementById('gameCategory');
const scoreEl = document.getElementById('score');
const timerEl = document.getElementById('timer');
const questionEl = document.getElementById('question');
const optionsEl = document.getElementById('options');
const resultEl = document.getElementById('result');
const nextBtn = document.getElementById('next');

let gameWords = [];
let currentQuestion = null;
let score = 0;
let timer = null;

function renderWords() {
  wordListEl.innerHTML = '';
  filteredWords.forEach(w => {
    const div = document.createElement('div');
    div.className = 'word-item';
    div.textContent = w.arabic;
    div.onclick = () => {
      selectedWord = w;
      document.querySelectorAll('.word-item').forEach(i => i.classList.remove('selected'));
      div.classList.add('selected');
      translationEl.textContent = w.translation;
      playAudioBtn.style.display = 'inline-block';
    };
    wordListEl.appendChild(div);
  });
}

function updateCategories() {
  const cats = Array.from(new Set(words.map(w => w.category)));
  cats.forEach(c => {
    const opt = document.createElement('option');
    opt.value = c;
    opt.textContent = c;
    categorySelect.appendChild(opt);

    const opt2 = opt.cloneNode(true);
    gameCategoryEl.appendChild(opt2);
  });
}

searchInput.addEventListener('input', () => {
  const q = searchInput.value.trim();
  filteredWords = words.filter(w => w.arabic.includes(q) || w.translation.includes(q));
  renderWords();
});

categorySelect.addEventListener('change', () => {
  const cat = categorySelect.value;
  filteredWords = cat ? words.filter(w => w.category === cat) : words;
  renderWords();
});

resetFilter.onclick = () => {
  searchInput.value = '';
  categorySelect.value = '';
  filteredWords = words;
  renderWords();
  translationEl.textContent = '';
  playAudioBtn.style.display = 'none';
};

playAudioBtn.onclick = () => {
  if (selectedWord) {
    const utterance = new SpeechSynthesisUtterance(selectedWord.arabic);
    utterance.lang = 'ar-SA';
    speechSynthesis.speak(utterance);
  }
};

// üéÆ –ò–≥—Ä–∞
function nextQuestion() {
  clearInterval(timer);
  timerEl.textContent = '‚è≥ 15';
  resultEl.textContent = '';
  optionsEl.innerHTML = '';
  if (!gameWords.length) {
    questionEl.textContent = 'üéâ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!';
    return;
  }
  currentQuestion = gameWords.pop();
  questionEl.textContent = currentQuestion.translation;

  const options = [currentQuestion, ...words.filter(w => w !== currentQuestion).sort(() => 0.5 - Math.random()).slice(0, 3)];
  options.sort(() => 0.5 - Math.random());
  options.forEach(opt => {
    const btn = document.createElement('button');
    btn.textContent = opt.arabic;
    btn.onclick = () => {
      if (opt === currentQuestion) {
        resultEl.textContent = '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!';
        score++;
      } else {
        resultEl.textContent = `‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. ${currentQuestion.arabic}`;
      }
      scoreEl.textContent = `–û—á–∫–∏: ${score}`;
      clearInterval(timer);
    };
    optionsEl.appendChild(btn);
  });

  let timeLeft = 15;
  timer = setInterval(() => {
    timeLeft--;
    timerEl.textContent = `‚è≥ ${timeLeft}`;
    if (timeLeft <= 0) {
      clearInterval(timer);
      resultEl.textContent = `‚åõ –í—Ä–µ–º—è –≤—ã—à–ª–æ. ${currentQuestion.arabic}`;
    }
  }, 1000);
}

nextBtn.onclick = nextQuestion;

levelEl.onchange = startGame;
gameCategoryEl.onchange = startGame;

function startGame() {
  score = 0;
  scoreEl.textContent = '–û—á–∫–∏: 0';
  resultEl.textContent = '';
  const level = levelEl.value;
  const cat = gameCategoryEl.value;

  gameWords = words.filter(w => !cat || w.category === cat).sort(() => 0.5 - Math.random());
  if (level !== 'all') {
    gameWords = gameWords.slice(0, +level);
  }
  nextQuestion();
}

updateCategories();
renderWords();
startGame();
</script>

</body>
</html>
