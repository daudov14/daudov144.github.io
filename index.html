<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ò–≥—Ä–∞: –ê—Ä–∞–±—Å–∫–∏–µ —Å–ª–æ–≤–∞</title>
<style>
body {
  font-family: sans-serif;
  background: linear-gradient(135deg, #222, #111);
  color: #fff;
  margin: 0;
  padding: 0;
  text-align: center;
}
main {
  max-width: 600px;
  margin: auto;
  padding: 20px;
}
h1 {
  font-size: 2rem;
  margin: 0.5em 0;
}
button {
  padding: 10px 20px;
  font-size: 1rem;
  margin: 10px;
  cursor: pointer;
  border: none;
  border-radius: 5px;
  background: #0077cc;
  color: white;
}
button:hover {
  background: #005fa3;
}
#word {
  font-size: 2rem;
  margin: 1em 0;
}
#options button {
  display: block;
  width: 100%;
  margin: 5px 0;
  background: #333;
}
#options button:hover {
  background: #444;
}
#timer {
  font-size: 1.2rem;
  margin: 1em 0;
}
#result {
  font-size: 1.5rem;
  margin-top: 1em;
  color: #0f0;
}
#player {
  font-size: 1rem;
  margin-bottom: 1em;
}
</style>
</head>
<body>

<main>
  <h1>üéÆ –ò–≥—Ä–∞: –ê—Ä–∞–±—Å–∫–∏–µ —Å–ª–æ–≤–∞</h1>
  <div id="player"></div>
  <div id="timer">‚è≥ –í—Ä–µ–º—è: <span id="time">30</span> —Å–µ–∫</div>
  <div id="word">–°–ª–æ–≤–æ</div>
  <div id="options"></div>
  <div id="result"></div>
</main>

<script>
const words = [
  {ar: "ŸÉÿ™ÿßÿ®", ru: "–ö–Ω–∏–≥–∞"},
  {ar: "ŸÖÿØÿ±ÿ≥ÿ©", ru: "–®–∫–æ–ª–∞"},
  {ar: "ŸÇŸÑŸÖ", ru: "–†—É—á–∫–∞"},
  {ar: "ÿ™ŸÅÿßÿ≠ÿ©", ru: "–Ø–±–ª–æ–∫–æ"},
  {ar: "ŸÖÿßÿ°", ru: "–í–æ–¥–∞"},
  {ar: "ÿ≥Ÿäÿßÿ±ÿ©", ru: "–ú–∞—à–∏–Ω–∞"},
  {ar: "ÿ∑ÿßÿ¶ÿ±ÿ©", ru: "–°–∞–º–æ–ª—ë—Ç"},
  {ar: "ÿÆÿ®ÿ≤", ru: "–•–ª–µ–±"},
  {ar: "ÿ¥ÿßŸä", ru: "–ß–∞–π"},
  {ar: "ÿ¥ŸÖÿ≥", ru: "–°–æ–ª–Ω—Ü–µ"}
];

let gameWords = [];
let current = 0;
let timer = 30;
let interval;
let playerName = '';
let bestScore = parseInt(localStorage.getItem('bestScore') || '0');

const wordDiv = document.getElementById("word");
const optionsDiv = document.getElementById("options");
const timeSpan = document.getElementById("time");
const resultDiv = document.getElementById("result");
const playerDiv = document.getElementById("player");

const errorSound = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_ebd56e8d79.mp3?filename=error-126627.mp3");

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function speak(text, lang="ar-SA") {
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = lang;
  speechSynthesis.speak(utter);
}

function registerPlayer() {
  playerName = prompt("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:") || "–ò–≥—Ä–æ–∫";
  playerDiv.textContent = `üë§ ${playerName} | üèÜ –†–µ–∫–æ—Ä–¥: ${bestScore}`;
}

function startGame() {
  gameWords = shuffle(words.slice());
  current = 0;
  timer = 30;
  timeSpan.textContent = timer;
  resultDiv.textContent = "";
  optionsDiv.innerHTML = "";
  wordDiv.textContent = "";
  playerDiv.textContent = `üë§ ${playerName} | üèÜ –†–µ–∫–æ—Ä–¥: ${bestScore}`;

  interval = setInterval(() => {
    timer--;
    timeSpan.textContent = timer;
    if (timer <= 0) {
      endGame(false, "‚è≥ –í—Ä–µ–º—è –≤—ã—à–ª–æ!");
    }
  }, 1000);
  nextWord();
}

function nextWord() {
  if (current >= gameWords.length) {
    endGame(true, "üéâ –ü–æ–±–µ–¥–∞!");
    return;
  }

  const isArabic = Math.random() < 0.5;
  const wordObj = gameWords[current];
  const correct = isArabic ? wordObj.ru : wordObj.ar;
  const question = isArabic ? wordObj.ar : wordObj.ru;

  wordDiv.textContent = question;
  speak(question, isArabic ? "ar-SA" : "ru-RU");

  const opts = [correct];
  while (opts.length < 4) {
    const rand = words[Math.floor(Math.random() * words.length)];
    const option = isArabic ? rand.ru : rand.ar;
    if (!opts.includes(option)) opts.push(option);
  }

  shuffle(opts);
  optionsDiv.innerHTML = "";
  opts.forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt;
    btn.onclick = () => {
      if (opt === correct) {
        current++;
        nextWord();
      } else {
        errorSound.play();
        endGame(false, "‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!");
      }
    };
    optionsDiv.appendChild(btn);
  });
}

function endGame(won, message) {
  clearInterval(interval);
  resultDiv.textContent = message;

  if (current > bestScore) {
    bestScore = current;
    localStorage.setItem('bestScore', bestScore);
    resultDiv.textContent += ` üéØ –ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥: ${bestScore}`;
  }

  optionsDiv.innerHTML = "";
  wordDiv.textContent = "";
  const replayBtn = document.createElement("button");
  replayBtn.textContent = "üîÅ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞";
  replayBtn.onclick = startGame;
  optionsDiv.appendChild(replayBtn);
}

registerPlayer();
startGame();
</script>

</body>
</html>
